# Хранилище метрик


# Исследование

Мне кажется, надо понимать, что рано или поздно мы переедем в базу данных, а значит надо 
+ Пользоваться интерфейсом для хранилища
+ Организовывать данные соответсвенно

Возможно в функцию мы будем получать интерфейс сохранения объекта, но без указания в какой базе мы его держим

## Хранилище никак не знает ни о чем, оно умеет только хранить.

### Хранилище только для одного типа данных. В марштрут мы передаем хранилище

```go
makeroute("/counter", NewStorage[int64](), counterHandler)

func counterHandler(storage,urlArgs){
	val=storage.ParseValue(string_from_request)
	storage.Add("name",val)
}
```

Тут можно использовать `Дженерики`

### Хранилище хранит разные типы данных, по сути нам нужен интерфейсный тип для данных, это гемор


```go
//использование Counter
Metric.Set[counter]()
Metric.Add[counter]()
Metric.Get[counter]()

//Хендлер маршрута
counterHandler():
	old_val,ok=storage["counter"]["testCounter"]
	storage["counter"]["testCounter"]=new(Counter)

```

Тут придется использовать `Интерфейсы`

> А можно написать и несколько версий-веток!