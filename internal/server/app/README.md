# Сервисный уровень приложения

## Основные штуки

Хочу, чтобы сервер был устроен так

```go
func main(){
    app,err=app.New(cfg)
    if err!=nil
    {
        //...
    }
    defer app.Close()
}
```

При этом хендлеры это часть `App`, как в примерах Алисы

```go
router.Post("/ping", App.Ping)

router.Get("/list", App.List)
```

`Ping()` переедет из `store` в `App`, и хоть это может показаться глуповатым на первый взгляд, стоит отментить задание. А в нашей архитектуре мы стараемся держаться поближе к предметами реального мира. `/ping` должно работать именно с БД. А стораж не знает в общем случае, БД он или нет. 

`Operator` скорее всего передет из хендлеров. И это позволит избавиться от зависимости к хранилищу у хелдлеров. Связывать `handlers` и `storage`  мы будем через `app`. Таким образом и хендлеры и хранилище получяит зависимостиь от более высокоуровнего СЕРВИСА, но при этом освободятся от зависимостей между друг другом. При этом App тоже не будет от них зависеть. Отличная тема однако!